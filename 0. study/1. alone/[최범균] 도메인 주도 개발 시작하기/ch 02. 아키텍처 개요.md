# 2장. 아키텍쳐 개요

---

## 네 개의 영역

- 인프라스트럭처: 구현 기술을 다룸
  - ex) 마리아DB, SMTP 서버, 카프카, HTTP 클라이언트(WebClient 등)

## 계층 구조 아키텍처

상위 계층에서 하위 계층으로 의존만 존재.
하위 계층은 상위 계층에 의존하지 않는다.

- 표현
- 응용
- 도메인
- 인프라스터력처

인프라스터력처에 의존하면 `테스트 어려움`과 `기능 확장의 어려움` 두 가지 문제 발생. DIP를 통해서 해결 가능.

> 과연 테스트가 어려울까?
> 주관적인 해결법 
> 1. Mocking Library, 
> 2. 수동으로 만든 Fake 객체 이용
> 꼭 DIP를 이용해서가 아니라 인프라 객체를 상속해서 해결할 수 있음!

## DIP

고수준 모듈이 단순히 저수준 모듈을 의존하고 있는 구조를
인터페이스, 추상 객체 등을 의존하게 하여 의존을 역전시키는 것.

![image](https://user-images.githubusercontent.com/66164361/209464912-bfd32de4-a582-48f4-b768-06e706a13e32.png)

> 다만 아래의 그림은 잘못된 구조라 한다.

![image](https://user-images.githubusercontent.com/66164361/209465025-f26f3970-3c24-435d-9b9c-3cb7fc30c7c4.png)

> 인터페이스는 고수준 모듈 관점에서 도출해야 한다고 한다.
> Q) 그래야만 하는가?

**DIP를  항상 적용할 필요는 없다.** 
- 구체 기술에 의존적인 게 효과적일 수도 있고 
- 추상화 대상이 잘 떠오르지 않을 때도 있다.  

DIP의 이점을 얻는 수준에서 적용 범위를 검토한다.

## 도메인 영역의 주요 구성요소

애그리거트
- 동사 발음: 애그리게이트
- 명사 발음: 애그리거트  

도메인이 커질 수록 많은 엔티티와 밸류가 출현.  개발자가 전체 구조를 집중하지 못하는 상황 발생. 
지도로는 소축적 지도에 해당. 객체를 군집 단위로 파악할 때 도움이 된다.

## 요청 처리 흐름

## 인프라스턱쳐 개요

## 모듈 구성


## 그외

1. 도메인이 인프라 갖기.
2. 도메인의 반환이 DTO일 경우 문제?
